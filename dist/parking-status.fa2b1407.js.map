{"version":3,"sources":["js/parking-status.js"],"names":["parking_data","parking_info","parking_id","name","lng","lat","free_space","sensors","sensor_id","last_communication","status","$","document","ready","user_location","tmplt_parking_info","Handlebars","compile","html","registerPartial","$main_panel","$results_panel","marker","selected_parking","loadData","on","parkingClicked","initMap","remove","removeClass","addClass","addMarker","data","mapboxgl","accessToken","map","Map","container","style","center","zoom","geocoder","MapboxGeocoder","mapOnLoad","ev","console","log","result","ltlng","event","Marker","draggable","color","setLngLat","addTo"],"mappings":"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","file":"parking-status.fa2b1407.js","sourceRoot":"..","sourcesContent":["parking_data ={\n\tparking_info : [\n\t\t{\n\t\t\tparking_id : 0,\n\t\t\tname : \"UG parking - A\",\n\t\t\tlng : 11.034922771803195,\n\t\t\tlat : 50.97425921864834,\n\t\t\tfree_space : 2,\n\t\t\tsensors : [\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 0,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 1,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 2,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 1\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tparking_id : 1,\n\t\t\tname : \"UG parking - B\",\n\t\t\tlng : 11.03747937655794,\n\t\t\tlat : 50.97473007957376,\n\t\t\tfree_space : 1,\n\t\t\tsensors : [\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 3,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 4,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 0\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 5,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 1\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tparking_id : 2,\n\t\t\tname : \"Name 3\",\n\t\t\tlng : 11.032400727497446,\n\t\t\tlat : 50.97426419894839,\n\t\t\tfree_space : 2,\n\t\t\tsensors : [\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 6,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 7,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 8,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 0\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 9,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsensor_id : 10,\n\t\t\t\t\tlast_communication : \"timestamp\",\n\t\t\t\t\tstatus : 0\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]\n};\n\n$(document).ready(function(){\n\tuser_location = [11.03283, 50.9787];\n\ttmplt_parking_info = Handlebars.compile($(\"#osd-parking-template\").html());\n\tHandlebars.registerPartial(\"osd-parking-row-template\", $(\"#osd-parking-row-template\").html());\n\t$main_panel = $('#osd-main');\n\t$results_panel = $(\"#osd-parking-info\");\n\tmarker = null;\n\tselected_parking = null;\n\tloadData();\n\t\n\t$results_panel.on(\"click\", \".osd-parking\", parkingClicked);\n\t// $main_panel.on(\"click\", \".osd-route-result\", resultOnClick)\n});\n\nfunction loadData(){\n\t// get parking data, then\n\t$results_panel.html(tmplt_parking_info(parking_data));\n\tinitMap();\n}\n\nfunction parkingClicked(){\n\tif(marker != null)\n\t\tmarker.remove();\n\tif(selected_parking != null)\n\t\tselected_parking.removeClass(\"focus\");\n\tselected_parking = $(this);\n\tselected_parking.addClass(\"focus\");\n\taddMarker([$(this).data('lng'),$(this).data('lat')]);\n}\n\nfunction initMap(){\n\tmapboxgl.accessToken = 'pk.eyJ1IjoidGFudmVlcjY5IiwiYSI6ImNqcmgwdGdpeTA3M2g0M25uNWYwbjZ2a3EifQ.wRjnyEoPjV7eLzmAl0v9Kg';\n    map = new mapboxgl.Map({container: 'map',style: 'mapbox://styles/mapbox/streets-v11',center : user_location,zoom : 12});\n    geocoder = new MapboxGeocoder({accessToken: mapboxgl.accessToken});\n    \n    map.on('load', mapOnLoad);\n}\n\nfunction mapOnLoad(){\n    //add_markers(previous_location);\n\n    geocoder.on('result', function(ev) {\n        console.log(ev.result.center);\n\n    });\n}\n\nfunction addMarker(ltlng,event) {\n    marker = new mapboxgl.Marker({draggable: false,color:\"#d02922\"})\n        .setLngLat(ltlng)\n        .addTo(map);\n}"]}